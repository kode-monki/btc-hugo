{{ define "main" }}
  {{ partial "page-header" . }} <section class="section-sm">
    <div class="container">
      <div class="row">
        {{ range .Pages }}
        <div class="md:col-6 lg:col-4 mb-8">
  <a href="{{ .RelPermalink }}" 
     class="group flex h-full flex-col overflow-hidden rounded-xl border border-border bg-body transition-all duration-300 hover:-translate-y-2 hover:shadow-xl dark:border-darkmode-border dark:bg-darkmode-body">
    
    <div class="h-48 overflow-hidden">
      {{ if .Params.image }}
        {{ partial "image" (dict "Src" .Params.image "Context" .Page "Alt" .Title "Class" "w-full h-full object-cover transition-transform duration-500 group-hover:scale-105") }}
      {{ end }}
    </div>

    <div class="flex flex-col p-6">
      <div class="mb-3 flex items-center gap-2">
        {{ if .Params.location }}
        <span class="rounded-full border border-primary/30 bg-primary/5 px-3 py-0.5 text-[10px] tracking-widest text-primary">
          {{ .Params.location }}
        </span>
        {{ end }}
        
        {{ if .Params.date_start }}
  {{ $start := time .Params.date_start }}
  {{ if .Params.date_end }}
    {{ $end := time .Params.date_end }}
    {{ if eq ($start.Format "Jan") ($end.Format "Jan") }}
      {{ $start.Format "Jan 2" }}–{{ $end.Format "2, 2006" }}
    {{ else }}
      {{ $start.Format "Jan 2" }}–{{ $end.Format "Jan 2, 2006" }}
    {{ end }}
  {{ else }}
    {{ $start.Format "Jan 2, 2006" }}
  {{ end }}
{{ else }}
  {{ .Date.Format "Jan 2, 2006" }}
{{ end }}
      </div>

      <h3 class="h5 mb-0 transition-colors group-hover:text-primary">
        {{ .Title }}
      </h3>
    </div>
  </a>
</div>
        {{ end }}
      </div>
    </div>
  </section>
{{ end }}